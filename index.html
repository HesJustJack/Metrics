<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Quiz Metrics Dashboard</title>
  
  <!-- Tailwind CSS CDN for styling -->
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">

  <style>
    /* Custom styling for a darker background */
    body {
      background-color: #121212;
    }
    .metric-box:hover {
      transform: translateY(-6px);
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.6);
    }
    .metric-box {
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
  </style>
</head>

<body class="font-sans bg-gray-900 text-white min-h-screen flex flex-col items-center">
  <!-- Title and Tabs -->
  <div class="w-full max-w-4xl px-4 mt-8">
    <h1 class="text-3xl font-semibold text-center mb-8">Quiz Metrics Dashboard</h1>

    <div class="flex justify-center space-x-4 mb-8">
      <button id="failbaseTab" class="tab-button py-2 px-4 bg-blue-600 rounded-md text-white hover:bg-blue-700">Failbase Quiz</button>
      <button id="jobTab" class="tab-button py-2 px-4 bg-blue-600 rounded-md text-white hover:bg-blue-700">Job Quiz</button>
      <button id="roleplayTab" class="tab-button py-2 px-4 bg-blue-600 rounded-md text-white hover:bg-blue-700">Roleplay Quiz</button>
    </div>
    
    <!-- Metrics Content -->
    <div id="metricsContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      <!-- Metrics will be dynamically added here -->
    </div>
  </div>

  <script>
    // Fetch and render metrics for the selected tab
    async function fetchMetrics(sheet) {
      const response = await fetch('https://script.google.com/macros/s/AKfycbyRTgsufzTG5NZUA2BPKQsuw0tDs_ZZmtVInU9x_uUhb4RRgs7MtZ0W77VgWiW-fi9w/exec?sheet=' + sheet); // Replace with your Google Apps Script Web App URL
      const data = await response.json();

      if (data) {
        const metricsContainer = document.getElementById('metricsContainer');
        metricsContainer.innerHTML = ''; // Clear previous content
        
        data.forEach(metric => {
          const metricBox = document.createElement('div');
          metricBox.className = 'metric-box p-6 bg-gray-800 rounded-lg shadow-md hover:shadow-lg';
          metricBox.innerHTML = `
            <h3 class="text-xl font-semibold text-blue-500">${metric.name}</h3>
            <p class="text-2xl mt-4 text-green-400">${metric.value}</p>
          `;
          metricsContainer.appendChild(metricBox);
        });
      } else {
        console.error('Failed to load metrics');
      }
    }

    // Activate tabs and load corresponding data
    document.getElementById('failbaseTab').addEventListener('click', () => {
      fetchMetrics('Failbase Roster');
    });
    document.getElementById('jobTab').addEventListener('click', () => {
      fetchMetrics('Job Roster');
    });
    document.getElementById('roleplayTab').addEventListener('click', () => {
      fetchMetrics('Roleplay Roster');
    });

    // Default load Failbase Roster metrics on page load
    fetchMetrics('Failbase Roster');
  </script>
</body>
</html>
